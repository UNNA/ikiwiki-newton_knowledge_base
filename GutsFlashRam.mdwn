Date: Mon, 6 Nov 2006 16:22:25 -0500
Mime-Version: 1.0 (Produced by PhpWiki 1.3.11p1)
Content-Type: application/x-phpwiki;
  pagename=GutsFlashRam;
  flags="";
  author=MatthiasMelcher;
  version=1;
  lastmodified=1162848145;
  created=1162848145;
  author_id=MatthiasMelcher;
  markup=2;
  hits=55;
  charset=iso-8859-1
Content-Transfer-Encoding: binary

The Flash RAM in the Newton can have several configuration. There are two drivers built in, one of them for 28F016 style RAM in 16bit and 8bit mode.

The 28F016 is a 2MByte Flash RAM commonly used to store the BIOS on PC motherboards. The data bus can be configured to 8 or 16 bit, so our Newton has to employ a trick to read this at StrongARM compatible 32bit. Using the Bank Register (0f241000), Flash RAM Lanes can be reconfigured.

Writing to this chip is a _lot_ more difficult. The 28F016 can only clear individual bits from 1 to 0. To reset a bit back to 1, a whole 32kByte bank needs to be reset to 0xff. This is not only incovinient, but also very s l o o o w (0.6sec/erase). There is also a limit on the number of erases before the bank will fail. NewtonOS does a lot of smarts to get around these issues.
